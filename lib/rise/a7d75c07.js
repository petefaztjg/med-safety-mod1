"use strict";(globalThis.wpRiseJsonp=globalThis.wpRiseJsonp||[]).push([["recorder"],{42248(en,Se,S){S.d(Se,{startRecording:()=>qt});var U=S(60220),me=S(40128),B=S(61942),T=S(44826),f=S(82020),m=S(78265),A=S(49176);const y={FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Focus:6,ViewEnd:7,VisualViewport:8,FrustrationRecord:9,Change:12},w={Document:0,DocumentType:1,Element:2,Text:3,CDATA:4,DocumentFragment:11},g={AddString:0,AddNode:1,RemoveNode:2,Attribute:3,Text:4,Size:5,ScrollPosition:6,AddStyleSheet:7,AttachedStyleSheets:8,MediaPlaybackState:9,VisualViewport:10},tn={Playing:0,Paused:1},I={Mutation:0,MouseMove:1,MouseInteraction:2,Scroll:3,ViewportResize:4,Input:5,TouchMove:6,MediaInteraction:7,StyleSheetRule:8},N={MouseUp:0,MouseDown:1,Click:2,ContextMenu:3,DblClick:4,Focus:5,Blur:6,TouchStart:7,TouchEnd:9},D={Play:0,Pause:1};function ye(e){return G(void 0,void 0,e)}function nn(e,t,n){return G(e,t,n)}function G(e,t,n){let o={container:void 0,parentId:e,previousSiblingId:void 0,nextSiblingId:t};const s=r=>o.previousSiblingId===r-1?0:o.nextSiblingId!==void 0?o.nextSiblingId-r:o.parentId!==void 0?r-o.parentId:null;return{advance(r){const i=n.getOrInsert(r),a=s(i);return o.previousSiblingId=i,{nodeId:i,insertionPoint:a}},ascend(){o.container&&(o=o.container)},descend(){o.previousSiblingId!==void 0&&(o={container:o,parentId:o.previousSiblingId,previousSiblingId:void 0,nextSiblingId:void 0})}}}var Ie=S(57577);function P(e,t){const n=e.tagName,o=e.value;if((0,f.Ie)(e,t)){const s=e.type;return n==="INPUT"&&(s==="button"||s==="submit"||s==="reset")?o:!o||n==="OPTION"?void 0:f.o}if(n==="OPTION"||n==="SELECT")return e.value;if(!(n!=="INPUT"&&n!=="TEXTAREA"))return o}const Te=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm,Ne=/^[A-Za-z]+:|^\/\//,Ee=/^["']?data:.*,/i;function ve(e,t){return e.replace(Te,(n,o,s,r,i,a)=>{const u=s||i||a;if(!t||!u||Ne.test(u)||Ee.test(u))return n;const c=o||r||"";return`url(${c}${Ce(u,t)}${c})`})}function Ce(e,t){try{return(0,Ie.c$)(e,t).href}catch{return e}}const we=/[^a-z1-6-_]/;function be(e){const t=e.toLowerCase().trim();return we.test(t)?"div":t}function J(e){return e.tagName.toLowerCase()}function X(e,t){return`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${e}' height='${t}' style='background-color:silver'%3E%3C/svg%3E`}function Y(e,t){if(e===void 0||e.length===0)return;const n=s=>{const r=s.cssRules||s.rules,i=Array.from(r,u=>u.cssText);return t.addMetric("cssText",i.reduce((u,c)=>u+c.length,0)),{cssRules:i,disabled:s.disabled||void 0,media:s.media.length>0?Array.from(s.media):void 0}},o=[];for(let s=0;s<e.length;s++)o.push(n(e[s]));return o}var Me=S(796);const Re=1e6;function W(e,t,n,o){if(t===f.$m.HIDDEN)return null;const s=e.getAttribute(n),r=e.tagName;if((0,f.ap)(r,n,s,t,o)){if(r==="IMG"){const i=e;if(i.naturalWidth>0)return X(i.naturalWidth,i.naturalHeight);const{width:a,height:u}=e.getBoundingClientRect();return a>0||u>0?X(a,u):f.eT}return r==="SOURCE"?f.eT:f.o}return s&&(0,f.ei)(s,Re)}function xe(e,t,n){return{...j(e,t,n),...K(e,t,n)}}function j(e,t,n){if(t===f.$m.HIDDEN)return{};const o={},s=J(e);for(let i=0;i<e.attributes.length;i+=1){const u=e.attributes.item(i).name,c=W(e,t,u,n.scope.configuration);c!==null&&(o[u]=c)}if(e.value&&(s==="textarea"||s==="select"||s==="option"||s==="input")){const i=P(e,t);i!==void 0&&(o.value=i)}if(s==="option"){const i=e;i.selected&&!(0,f.Ie)(i,t)?o.selected="":delete o.selected}const r=e;return s==="input"&&(r.type==="radio"||r.type==="checkbox")&&(r.checked&&!(0,f.Ie)(r,t)?o.checked="":delete o.checked),o}function K(e,t,n){if(t===f.$m.HIDDEN)return{};const o={},s=e.ownerDocument,r=J(e);if(r==="link"){const u=Array.from(s.styleSheets).find(l=>l.href===e.href),c=L(u);c&&u&&(n.addMetric("cssText",c.length),o._cssText=c)}if(r==="style"&&e.sheet){const u=L(e.sheet);u&&(n.addMetric("cssText",u.length),o._cssText=u)}if(r==="audio"||r==="video"){const u=e;o.rr_mediaState=u.paused?"paused":"played"}let i,a;switch(n.kind){case 0:i=Math.round(e.scrollTop),a=Math.round(e.scrollLeft),(i||a)&&n.scope.elementsScrollPositions.set(e,{scrollTop:i,scrollLeft:a});break;case 1:n.scope.elementsScrollPositions.has(e)&&({scrollTop:i,scrollLeft:a}=n.scope.elementsScrollPositions.get(e));break}return a&&(o.rr_scrollLeft=a),i&&(o.rr_scrollTop=i),o}function L(e){if(!e)return null;let t;try{t=e.rules||e.cssRules}catch{}if(!t)return null;const n=Array.from(t,(0,Me.nr)()?Ae:Z).join("");return ve(n,e.href)}function Ae(e){if(Oe(e)&&e.selectorText.includes(":")){const t=/(\[[\w-]+[^\\])(:[^\]]+\])/g;return e.cssText.replace(t,"$1\\$2")}return Z(e)}function Z(e){return De(e)&&L(e.styleSheet)||e.cssText}function De(e){return"styleSheet"in e}function Oe(e){return"selectorText"in e}function V(e,t,n){switch(e.nodeType){case e.DOCUMENT_NODE:return ze(e,t,n);case e.DOCUMENT_FRAGMENT_NODE:return Pe(e,t,n);case e.DOCUMENT_TYPE_NODE:return Le(e,n);case e.ELEMENT_NODE:return Ve(e,t,n);case e.TEXT_NODE:return _e(e,t,n);case e.CDATA_SECTION_NODE:return Fe(e,n);default:return null}}function k(e,t,n){const o=[];return(0,f.wI)(e,s=>{const r=V(s,t,n);r&&o.push(r)}),o}function ze(e,t,n){return{type:w.Document,id:n.assignId(e),childNodes:k(e,t,n),adoptedStyleSheets:Y(e.adoptedStyleSheets,n)}}function Pe(e,t,n){const o=(0,f.p_)(e);return o&&n.scope.shadowRootsController.addShadowRoot(e,n.scope),{type:w.DocumentFragment,id:n.assignId(e),childNodes:k(e,t,n),isShadowRoot:o,adoptedStyleSheets:o?Y(e.adoptedStyleSheets,n):void 0}}function Le(e,t){return{type:w.DocumentType,id:t.assignId(e),name:e.name,publicId:e.publicId,systemId:e.systemId}}function Ve(e,t,n){const o=be(e.tagName),s=ke(e)||void 0,r=(0,f.jR)((0,f.dT)(e),t);if(r===f.$m.HIDDEN){const{width:c,height:l}=e.getBoundingClientRect();return{type:w.Element,id:n.assignId(e),tagName:o,attributes:{rr_width:`${c}px`,rr_height:`${l}px`,[f.NT]:f.Wd},childNodes:[],isSVG:s}}if(r===f.$m.IGNORE)return null;const i=n.assignId(e),a=xe(e,r,n);let u=[];return(0,f.wR)(e)&&o!=="style"&&(u=k(e,r,n)),{type:w.Element,id:i,tagName:o,attributes:a,childNodes:u,isSVG:s}}function ke(e){return e.tagName==="svg"||e instanceof SVGElement}function _e(e,t,n){const o=(0,f.rf)(e,t);return o===void 0?null:{type:w.Text,id:n.assignId(e),textContent:o}}function Fe(e,t){return{type:w.CDATA,id:t.assignId(e),textContent:""}}function He(e,t){const n=t.scope.configuration.defaultPrivacyLevel;return V(e,n,t)}function Q(e,t,n,o){let s;const r=(0,f.dT)(t);if(r?s=(0,f.jR)(r,n):s=n,s===f.$m.HIDDEN){Ye(e,t,o);return}if(s!==f.$m.IGNORE){switch(t.nodeType){case t.CDATA_SECTION_NODE:Xe(e,t,o);break;case t.DOCUMENT_NODE:$e(e,t,o);break;case t.DOCUMENT_FRAGMENT_NODE:Ue(e,t,o);break;case t.DOCUMENT_TYPE_NODE:Be(e,t,o);break;case t.ELEMENT_NODE:Ge(e,t,s,o);break;case t.TEXT_NODE:Je(e,t,s,o);break;default:return}switch(t.nodeType){case t.CDATA_SECTION_NODE:case t.DOCUMENT_TYPE_NODE:case t.TEXT_NODE:return}t.nodeName!=="STYLE"&&(e.descend(),(0,f.wI)(t,i=>{Q(e,i,s,o)}),e.ascend())}}function $e(e,t,n){const{nodeId:o,insertionPoint:s}=e.advance(t);n.addNode(s,"#document"),n.setScrollPosition(o,(0,f.Gn)(),(0,f.zL)()),q(t.adoptedStyleSheets,o,n)}function Ue(e,t,n){const{nodeId:o,insertionPoint:s}=e.advance(t);if(!(0,f.p_)(t)){n.addNode(s,"#document-fragment");return}n.addNode(s,"#shadow-root"),n.scope.shadowRootsController.addShadowRoot(t,n.scope),q(t.adoptedStyleSheets,o,n)}function Be(e,t,n){const{insertionPoint:o}=e.advance(t);n.addNode(o,"#doctype",t.name,t.publicId,t.systemId)}function Ge(e,t,n,o){const{nodeId:s,insertionPoint:r}=e.advance(t),i=Object.entries(j(t,n,o));o.addNode(r,ee(t),...i);const{_cssText:a,rr_mediaState:u,rr_scrollLeft:c,rr_scrollTop:l}=K(t,n,o),d=t;if(a!==void 0&&d.sheet){const p=o.scope.styleSheetIds.getOrInsert(d.sheet);o.addStyleSheet(a),o.attachStyleSheets(s,[p])}u==="played"?o.setMediaPlaybackState(s,D.Play):u==="paused"&&o.setMediaPlaybackState(s,D.Pause),(c!==void 0||l!==void 0)&&o.setScrollPosition(s,c||0,l||0)}function Je(e,t,n,o){const s=(0,f.rf)(t,n);if(s===void 0)return;const{insertionPoint:r}=e.advance(t);o.addNode(r,"#text",s)}function Xe(e,t,n){const{insertionPoint:o}=e.advance(t);n.addNode(o,"#cdata-section")}function Ye(e,t,n){if(!(0,f.nS)(t))return;const{nodeId:o,insertionPoint:s}=e.advance(t);n.addNode(s,ee(t),[f.NT,f.Wd]);const{width:r,height:i}=t.getBoundingClientRect();n.setSize(o,r,i)}function q(e,t,n){!e||e.length===0||n.attachStyleSheets(t,e.map(o=>We(o,n)))}function We(e,t){const n=Array.from(e.cssRules||e.rules,s=>s.cssText),o=e.media.length>0?Array.from(e.media):void 0;return t.addMetric("cssText",n.reduce((s,r)=>s+r.length,0)),t.addStyleSheet(n,o,e.disabled),t.scope.styleSheetIds.getOrInsert(e)}function ee(e){const t=e.nodeName;return je(e)?`svg>${t}`:t}function je(e){return e.namespaceURI==="http://www.w3.org/2000/svg"}function _(){return{cssText:{count:0,max:0,sum:0},serializationDuration:{count:0,max:0,sum:0}}}function O(e,t,n){e[t].count+=1,e[t].max=Math.max(e[t].max,n),e[t].sum+=n}function Ke(e,t){for(const n of["cssText","serializationDuration"])e[n].count+=t[n].count,e[n].max=Math.max(e[n].max,t[n].max),e[n].sum+=t[n].sum}function Ze(e){let t={};const n=r=>{for(let i=0,a=r.length;i<a;i++){const u=r[i];if(typeof u=="string"){const c=e.size;r[i]=e.getOrInsert(u),e.size>c&&o(g.AddString,u)}else Array.isArray(u)&&n(u)}},o=(r,i)=>{r in t||(t[r]=[r]),r!==g.AddString&&Array.isArray(i)&&n(i),t[r].push(i)};return{add:o,flush:()=>{const r=[];return[g.AddString,g.AddNode,g.RemoveNode,g.Attribute,g.Text,g.Size,g.ScrollPosition,g.AddStyleSheet,g.AttachedStyleSheets,g.MediaPlaybackState,g.VisualViewport].forEach(i=>{const a=t[i];a&&r.push(a)}),t={},r}}}function te(e,t,n,o,s){const r=[],i=_(),a={add(c){r.push(c)},addMetric(c,l){O(i,c,l)},assignId(c){const l=o.nodeIds.getOrInsert(c);return a.serializedNodeIds&&a.serializedNodeIds.add(l),l},kind:e,scope:o},u=(0,m.nx)();s(a),O(i,"serializationDuration",(0,m.vk)(u,(0,m.nx)()));for(const c of r)t(c);n(i)}function Qe(e,t,n,o,s,r){const i=Ze(o.stringIds),a=_(),u={addMetric(d,p){O(a,d,p)},addNode(...d){i.add(g.AddNode,d)},addStyleSheet(d,p,h){h?i.add(g.AddStyleSheet,[d,p||[],h]):p?i.add(g.AddStyleSheet,[d,p]):i.add(g.AddStyleSheet,[d])},attachStyleSheets(d,p){const h=[d];for(const v of p)h.push(v);i.add(g.AttachedStyleSheets,h)},setMediaPlaybackState(d,p){i.add(g.MediaPlaybackState,[d,p])},setScrollPosition(d,p,h){i.add(g.ScrollPosition,[d,p,h])},setSize(d,p,h){i.add(g.Size,[d,p,h])},kind:e,scope:o},c=(0,m.nx)();r(u),O(a,"serializationDuration",(0,m.vk)(c,(0,m.nx)()));const l=i.flush();l.length>0&&t({data:l,type:y.Change,timestamp:s}),n(a)}const ne=25;function qe(e){return Math.abs(e.pageTop-e.offsetTop-window.scrollY)>ne||Math.abs(e.pageLeft-e.offsetLeft-window.scrollX)>ne}const et=(e,t)=>{const n=window.visualViewport,o={layoutViewportX:e,layoutViewportY:t,visualViewportX:e,visualViewportY:t};if(n)qe(n)?(o.layoutViewportX=Math.round(e+n.offsetLeft),o.layoutViewportY=Math.round(t+n.offsetTop)):(o.visualViewportX=Math.round(e-n.offsetLeft),o.visualViewportY=Math.round(t-n.offsetTop));else return o;return o},oe=e=>({scale:e.scale,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,pageLeft:e.pageLeft,pageTop:e.pageTop,height:e.height,width:e.width});function tt(e,t,n,o,s){se((0,m.nx)(),0,t,n,s);const{unsubscribe:r}=e.subscribe(2,i=>{o(),se(i.startClocks.timeStamp,1,t,n,s)});return{stop:r}}function se(e,t,n,o,s){const{width:r,height:i}=(0,f.pB)();n({data:{height:i,href:window.location.href,width:r},type:y.Meta,timestamp:e}),n({data:{has_focus:document.hasFocus()},type:y.Focus,timestamp:e}),(0,A.sr)(A.R9.USE_CHANGE_RECORDS)?(t===1&&s.resetIds(),Qe(t,n,o,s,e,a=>{Q(ye(s.nodeIds),document,s.configuration.defaultPrivacyLevel,a)})):te(t,n,o,s,a=>{a.add(nt(e,a))}),window.visualViewport&&n({data:oe(window.visualViewport),type:y.VisualViewport,timestamp:e})}function nt(e,t){return{data:{node:He(document,t),initialOffset:{left:(0,f.Gn)(),top:(0,f.zL)()}},type:y.FullSnapshot,timestamp:e}}var ot,b,st,F,rt,it,at,ut,ct;function on({configuration:e}={}){const t=[],n=o=>{t.push(o)};return rt(ot(),0,n,b,re(e)),t}function sn(e,{configuration:t}={}){let n=null;return ut(0,b,b,re(t),o=>{const s=st(e,o.scope.configuration.defaultPrivacyLevel);s===F.HIDDEN||s===F.IGNORE||(n=ct(e,s,o))}),n}function re(e){return it({defaultPrivacyLevel:F.ALLOW,...e},at(),{addShadowRoot:b,removeShadowRoot:b,flush:b,stop:b})}var dt=S(81685),z=S(66096),M=S(58817);function ie(e){return!!e.changedTouches}function R(e){return e.composed===!0&&(0,f.XS)(e.target)?e.composedPath()[0]:e.target}function E(e,t){return{data:{source:e,...t},type:y.IncrementalSnapshot,timestamp:(0,m.nx)()}}const lt=50;function ft(e,t){const{throttled:n,cancel:o}=(0,T.n)(r=>{const i=R(r),a=t.nodeIds.get(i);if(a===void 0)return;const u=ae(r);if(!u)return;const c={id:a,timeOffset:0,x:u.x,y:u.y};e(E(ie(r)?I.TouchMove:I.MouseMove,{positions:[c]}))},lt,{trailing:!1}),{stop:s}=(0,M.l)(t.configuration,document,["mousemove","touchmove"],n,{capture:!0,passive:!0});return{stop:()=>{s(),o()}}}function ae(e){let{clientX:t,clientY:n}=ie(e)?e.changedTouches[0]:e;if(window.visualViewport){const{visualViewportX:o,visualViewportY:s}=et(t,n);t=o,n=s}if(!(!Number.isFinite(t)||!Number.isFinite(n)))return{x:t,y:n}}const ue={pointerup:N.MouseUp,mousedown:N.MouseDown,click:N.Click,contextmenu:N.ContextMenu,dblclick:N.DblClick,focus:N.Focus,blur:N.Blur,touchstart:N.TouchStart,touchend:N.TouchEnd};function pt(e,t){const n=o=>{const s=R(o),r=t.nodeIds.get(s);if(r===void 0||(0,f.PJ)(s,t.configuration.defaultPrivacyLevel)===f.$m.HIDDEN)return;const i=ue[o.type];let a;if(i!==N.Blur&&i!==N.Focus){const u=ae(o);if(!u)return;a={id:r,type:i,x:u.x,y:u.y}}else a={id:r,type:i};e({id:t.eventIds.getOrInsert(o),...E(I.MouseInteraction,a)})};return(0,M.l)(t.configuration,document,Object.keys(ue),n,{capture:!0,passive:!0})}const ht=100;function ce(e,t,n){const{throttled:o,cancel:s}=(0,T.n)(i=>{const a=R(i);if(!a)return;const u=n.nodeIds.get(a);if(u===void 0||(0,f.PJ)(a,n.configuration.defaultPrivacyLevel)===f.$m.HIDDEN)return;const c=a===document?{scrollTop:(0,f.zL)(),scrollLeft:(0,f.Gn)()}:{scrollTop:Math.round(a.scrollTop),scrollLeft:Math.round(a.scrollLeft)};n.elementsScrollPositions.set(a,c),t(E(I.Scroll,{id:u,x:c.scrollLeft,y:c.scrollTop}))},ht),{stop:r}=(0,M.q)(n.configuration,e,"scroll",o,{capture:!0,passive:!0});return{stop:()=>{r(),s()}}}const gt=200;function St(e,t){const n=(0,f.g1)(t.configuration).subscribe(o=>{e(E(I.ViewportResize,o))});return{stop:()=>{n.unsubscribe()}}}function mt(e,t){const n=window.visualViewport;if(!n)return{stop:T.l};const{throttled:o,cancel:s}=(0,T.n)(()=>{e({data:oe(n),type:y.VisualViewport,timestamp:(0,m.nx)()})},gt,{trailing:!1}),{stop:r}=(0,M.l)(t.configuration,n,["resize","scroll"],o,{capture:!0,passive:!0});return{stop:()=>{r(),s()}}}function yt(e,t){return(0,M.l)(t.configuration,document,["play","pause"],n=>{const o=R(n);if(!o)return;const s=t.nodeIds.get(o);s===void 0||(0,f.PJ)(o,t.configuration.defaultPrivacyLevel)===f.$m.HIDDEN||e(E(I.MediaInteraction,{id:s,type:n.type==="play"?D.Play:D.Pause}))},{capture:!0,passive:!0})}var C=S(37953);function It(e,t){function n(r,i){if(!r||!r.ownerNode)return;const a=t.nodeIds.get(r.ownerNode);a!==void 0&&i(a)}const o=[(0,C.H)(CSSStyleSheet.prototype,"insertRule",({target:r,parameters:[i,a]})=>{n(r,u=>e(E(I.StyleSheetRule,{id:u,adds:[{rule:i,index:a}]})))}),(0,C.H)(CSSStyleSheet.prototype,"deleteRule",({target:r,parameters:[i]})=>{n(r,a=>e(E(I.StyleSheetRule,{id:a,removes:[{index:i}]})))})];typeof CSSGroupingRule<"u"?s(CSSGroupingRule):(s(CSSMediaRule),s(CSSSupportsRule));function s(r){o.push((0,C.H)(r.prototype,"insertRule",({target:i,parameters:[a,u]})=>{n(i.parentStyleSheet,c=>{const l=de(i);l&&(l.push(u||0),e(E(I.StyleSheetRule,{id:c,adds:[{rule:a,index:l}]})))})}),(0,C.H)(r.prototype,"deleteRule",({target:i,parameters:[a]})=>{n(i.parentStyleSheet,u=>{const c=de(i);c&&(c.push(a),e(E(I.StyleSheetRule,{id:u,removes:[{index:c}]})))})}))}return{stop:()=>{o.forEach(r=>r.stop())}}}function de(e){const t=[];let n=e;for(;n.parentRule;){const i=Array.from(n.parentRule.cssRules).indexOf(n);t.unshift(i),n=n.parentRule}if(!n.parentStyleSheet)return;const s=Array.from(n.parentStyleSheet.cssRules).indexOf(n);return t.unshift(s),t}function Tt(e,t){return(0,M.l)(t.configuration,window,["focus","blur"],()=>{e({data:{has_focus:document.hasFocus()},type:y.Focus,timestamp:(0,m.nx)()})})}function Nt(e,t,n){const o=e.subscribe(12,s=>{var r,i;s.rawRumEvent.type===f.bb.ACTION&&s.rawRumEvent.action.type===f.X2.CLICK&&(!((i=(r=s.rawRumEvent.action.frustration)===null||r===void 0?void 0:r.type)===null||i===void 0)&&i.length)&&"events"in s.domainContext&&s.domainContext.events&&s.domainContext.events.length&&t({timestamp:s.rawRumEvent.date,type:y.FrustrationRecord,data:{frustrationTypes:s.rawRumEvent.action.frustration.type,recordIds:s.domainContext.events.map(a=>n.eventIds.getOrInsert(a))}})});return{stop:()=>{o.unsubscribe()}}}function Et(e,t,n){const o=e.subscribe(5,()=>{n(),t({timestamp:(0,m.nx)(),type:y.ViewEnd})});return{stop:()=>{o.unsubscribe()}}}function le(e,t,n){const o=n.configuration.defaultPrivacyLevel,s=new WeakMap,r=e!==document,{stop:i}=(0,M.l)(n.configuration,e,r?["change"]:["input","change"],l=>{const d=R(l);(d instanceof HTMLInputElement||d instanceof HTMLTextAreaElement||d instanceof HTMLSelectElement)&&u(d)},{capture:!0,passive:!0});let a;if(r)a=T.l;else{const l=[(0,C.t)(HTMLInputElement.prototype,"value",u),(0,C.t)(HTMLInputElement.prototype,"checked",u),(0,C.t)(HTMLSelectElement.prototype,"value",u),(0,C.t)(HTMLTextAreaElement.prototype,"value",u),(0,C.t)(HTMLSelectElement.prototype,"selectedIndex",u)];a=()=>{l.forEach(d=>d.stop())}}return{stop:()=>{a(),i()}};function u(l){const d=(0,f.PJ)(l,o);if(d===f.$m.HIDDEN)return;const p=l.type;let h;if(p==="radio"||p==="checkbox"){if((0,f.Ie)(l,d))return;h={isChecked:l.checked}}else{const x=P(l,d);if(x===void 0)return;h={text:x}}c(l,h);const v=l.name;p==="radio"&&v&&l.checked&&document.querySelectorAll(`input[type="radio"][name="${CSS.escape(v)}"]`).forEach(x=>{x!==l&&c(x,{isChecked:!1})})}function c(l,d){const p=n.nodeIds.get(l);if(p===void 0)return;const h=s.get(l);(!h||h.text!==d.text||h.isChecked!==d.isChecked)&&(s.set(l,d),t(E(I.Input,{id:p,...d})))}}var vt=S(41743),Ct=S(79773);const wt=100,bt=16;function Mt(e){let t=T.l,n=[];function o(){t(),e(n),n=[]}const{throttled:s,cancel:r}=(0,T.n)(o,bt,{leading:!1});return{addMutations:i=>{n.length===0&&(t=(0,Ct.BB)(s,{timeout:wt})),n.push(...i)},flush:o,stop:()=>{t(),r()}}}function fe(e,t,n,o){const s=(0,f.W3)();if(!s)return{stop:T.l,flush:T.l};const r=Mt(a=>{te(2,t,n,o,u=>Rt(a.concat(i.takeRecords()),u))}),i=new s((0,vt.dm)(r.addMutations));return i.observe(e,{attributeOldValue:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{stop:()=>{i.disconnect(),r.stop()},flush:()=>{r.flush()}}}function Rt(e,t){const n=new Map;e.filter(c=>c.type==="childList").forEach(c=>{c.removedNodes.forEach(l=>{pe(l,t.scope.shadowRootsController.removeShadowRoot)})});const o=e.filter(c=>c.target.isConnected&&zt(c.target,t.scope.nodeIds)&&(0,f.PJ)(c.target,t.scope.configuration.defaultPrivacyLevel,n)!==f.$m.HIDDEN),{adds:s,removes:r,hasBeenSerialized:i}=xt(o.filter(c=>c.type==="childList"),n,t),a=At(o.filter(c=>c.type==="characterData"&&!i(c.target)),n,t),u=Dt(o.filter(c=>c.type==="attributes"&&!i(c.target)),n,t);!a.length&&!u.length&&!r.length&&!s.length||t.add(E(I.Mutation,{adds:s,removes:r,texts:a,attributes:u}))}function xt(e,t,n){const o=new Set,s=new Map;for(const l of e)l.addedNodes.forEach(d=>{o.add(d)}),l.removedNodes.forEach(d=>{o.has(d)||s.set(d,l.target),o.delete(d)});const r=Array.from(o);Ot(r),n.serializedNodeIds=new Set;const i=[];for(const l of r){if(u(l))continue;const d=(0,f.PJ)(l.parentNode,n.scope.configuration.defaultPrivacyLevel,t);if(d===f.$m.HIDDEN||d===f.$m.IGNORE)continue;const p=V(l,d,n);if(!p)continue;const h=(0,f.$4)(l);i.push({nextId:c(l),parentId:n.scope.nodeIds.get(h),node:p})}const a=[];return s.forEach((l,d)=>{const p=n.scope.nodeIds.get(l),h=n.scope.nodeIds.get(d);p!==void 0&&h!==void 0&&a.push({parentId:p,id:h})}),{adds:i,removes:a,hasBeenSerialized:u};function u(l){var d;const p=n.scope.nodeIds.get(l);return p!==void 0&&((d=n.serializedNodeIds)===null||d===void 0?void 0:d.has(p))}function c(l){let d=l.nextSibling;for(;d;){const p=n.scope.nodeIds.get(d);if(p!==void 0)return p;d=d.nextSibling}return null}}function At(e,t,n){var o;const s=[],r=new Set,i=e.filter(a=>r.has(a.target)?!1:(r.add(a.target),!0));for(const a of i){if(a.target.textContent===a.oldValue)continue;const c=n.scope.nodeIds.get(a.target);if(c===void 0)continue;const l=(0,f.PJ)((0,f.$4)(a.target),n.scope.configuration.defaultPrivacyLevel,t);l===f.$m.HIDDEN||l===f.$m.IGNORE||s.push({id:c,value:(o=(0,f.rf)(a.target,l))!==null&&o!==void 0?o:null})}return s}function Dt(e,t,n){const o=[],s=new Map,r=e.filter(a=>{const u=s.get(a.target);return u&&u.has(a.attributeName)?!1:(u?u.add(a.attributeName):s.set(a.target,new Set([a.attributeName])),!0)}),i=new Map;for(const a of r){if(a.target.getAttribute(a.attributeName)===a.oldValue)continue;const c=n.scope.nodeIds.get(a.target);if(c===void 0)continue;const l=(0,f.PJ)(a.target,n.scope.configuration.defaultPrivacyLevel,t),d=W(a.target,l,a.attributeName,n.scope.configuration);let p;if(a.attributeName==="value"){const v=P(a.target,l);if(v===void 0)continue;p=v}else typeof d=="string"?p=d:p=null;let h=i.get(a.target);h||(h={id:c,attributes:{}},o.push(h),i.set(a.target,h)),h.attributes[a.attributeName]=p}return o}function Ot(e){e.sort((t,n)=>{const o=t.compareDocumentPosition(n);return o&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:o&Node.DOCUMENT_POSITION_CONTAINS||o&Node.DOCUMENT_POSITION_FOLLOWING?1:o&Node.DOCUMENT_POSITION_PRECEDING?-1:0})}function pe(e,t){(0,f.XS)(e)&&t(e.shadowRoot),(0,f.wI)(e,n=>pe(n,t))}function zt(e,t){let n=e;for(;n;){if(t.get(n)===void 0&&!(0,f.p_)(n))return!1;n=(0,f.$4)(n)}return!0}function Pt(){const e=new WeakMap;return{set(t,n){t===document&&!document.scrollingElement||e.set(t===document?document.scrollingElement:t,n)},get(t){return e.get(t)},has(t){return e.has(t)}}}const Lt=(e,t)=>{const n=new Map;return{addShadowRoot:(s,r)=>{if(n.has(s))return;const i=fe(s,e,t,r),a=le(s,e,r),u=ce(s,e,r);n.set(s,{flush:()=>i.flush(),stop:()=>{i.stop(),a.stop(),u.stop()}})},removeShadowRoot:s=>{const r=n.get(s);r&&(r.stop(),n.delete(s))},stop:()=>{n.forEach(({stop:s})=>s())},flush:()=>{n.forEach(({flush:s})=>s())}}};function Vt(){return H(1)}function kt(){return H(0)}function _t(){return Ht(0)}function Ft(){return H(0)}function Ht(e){return he(()=>new Map,e)}function H(e){return he(()=>new WeakMap,e)}function he(e,t){let n=e(),o=t;const s=r=>n.get(r);return{clear(){n=e(),o=t},get:s,getOrInsert(r){let i=s(r);return i===void 0&&(i=o++,n.set(r,i)),i},get size(){return o-t}}}function $t(e,t,n){const o=Vt(),s=kt(),r=_t(),i=Ft();return{resetIds(){o.clear(),s.clear(),r.clear(),i.clear()},configuration:e,elementsScrollPositions:t,eventIds:o,nodeIds:s,shadowRootsController:n,stringIds:r,styleSheetIds:i}}function Ut(e){const{emitRecord:t,emitStats:n,configuration:o,lifeCycle:s}=e;if(!t||!n)throw new Error("emit functions are required");const r=p=>{t(p),(0,dt.b)("record",{record:p});const h=e.viewHistory.findView();z.$1(h.id)},i=Lt(r,n),a=$t(o,Pt(),i),{stop:u}=tt(s,r,n,c,a);function c(){i.flush(),l.flush()}const l=fe(document,r,n,a),d=[l,ft(r,a),pt(r,a),ce(document,r,a),St(r,a),le(document,r,a),yt(r,a),It(r,a),Tt(r,a),mt(r,a),Nt(s,r,a),Et(s,r,c)];return{stop:()=>{i.stop(),d.forEach(p=>p.stop()),u()},flushMutations:c,shadowRootsController:i}}var Bt=S(42107),ge=S(74828);function Gt(e,t,n,o){const s=new FormData;s.append("segment",new Blob([e],{type:"application/octet-stream"}),`${t.session.id}-${t.start}`);const r={raw_segment_size:o,compressed_segment_size:e.byteLength,...t},i=JSON.stringify(r);return s.append("event",new Blob([i],{type:"application/json"})),{data:s,bytesCount:e.byteLength,cssText:n.cssText,isFullSnapshot:t.index_in_view===0,rawSize:o,recordCount:t.records_count,serializationDuration:n.serializationDuration}}function Jt({context:e,creationReason:t,encoder:n}){let o=0;const s=e.view.id,r=z.K_(s),i={start:1/0,end:-1/0,creation_reason:t,records_count:0,has_full_snapshot:!1,index_in_view:r,source:"browser",...e},a=_();z.H5(s);function u(d,p){i.start=Math.min(i.start,d.timestamp),i.end=Math.max(i.end,d.timestamp),i.records_count+=1,i.has_full_snapshot||(i.has_full_snapshot=d.type===y.FullSnapshot||d.type===y.Change&&i.index_in_view===0);const h=n.isEmpty?'{"records":[':",";n.write(h+JSON.stringify(d),v=>{o+=v,p(o)})}function c(d){Ke(a,d)}function l(d){if(n.isEmpty)throw new Error("Empty segment flushed");n.write(`],${JSON.stringify(i).slice(1)}
`),n.finish(p=>{z.L7(i.view.id,p.rawBytesCount),d(i,a,p)})}return{addRecord:u,addStats:c,flush:l}}const Xt=5*m.OY;let $=6e4;function Yt(e,t,n,o,s,r){return Wt(e,()=>jt(t.applicationId,n,o),s,r)}function Wt(e,t,n,o){let s={status:0,nextSegmentCreationReason:"init"};const{unsubscribe:r}=e.subscribe(2,()=>{a("view_change")}),{unsubscribe:i}=e.subscribe(11,u=>{a(u.reason)});function a(u){s.status===1&&(s.segment.flush((c,l,d)=>{const p=Gt(d.output,c,l,d.rawBytesCount);(0,Bt.Kp)(u)?n.sendOnExit(p):n.send(p)}),(0,ge.DJ)(s.expirationTimeoutId)),u!=="stop"?s={status:0,nextSegmentCreationReason:u}:s={status:2}}return{addRecord:u=>{if(s.status!==2){if(s.status===0){const c=t();if(!c)return;s={status:1,segment:Jt({encoder:o,context:c,creationReason:s.nextSegmentCreationReason}),expirationTimeoutId:(0,ge.wg)(()=>{a("segment_duration_limit")},Xt)}}s.segment.addRecord(u,c=>{c>$&&a("segment_bytes_limit")})}},addStats:u=>{s.status===1&&s.segment.addStats(u)},stop:()=>{a("stop"),r(),i()}}}function jt(e,t,n){const o=t.findTrackedSession(),s=n.findView();if(!(!o||!s))return{application:{id:e},session:{id:o.id},view:{id:s.id}}}function rn(e=6e4){$=e}function Kt(e,t){if(!e.metricsEnabled)return{stop:T.l};const{unsubscribe:n}=t.subscribe(o=>{if(o.type==="failure"||o.type==="queue-full"||o.type==="success"&&o.payload.isFullSnapshot){const s=Zt(o.type,o.bandwidth,o.payload);(0,U.Gk)("Segment network request metrics",{metrics:s})}});return{stop:n}}function Zt(e,t,n){return{cssText:{count:n.cssText.count,max:n.cssText.max,sum:n.cssText.sum},encoding:{fullSnapshot:(0,A.sr)(A.R9.USE_CHANGE_RECORDS)?"change":"v1",incrementalSnapshot:"v1"},isFullSnapshot:n.isFullSnapshot,ongoingRequests:{count:t.ongoingRequestCount,totalSize:t.ongoingByteCount},recordCount:n.recordCount,result:e,serializationDuration:{count:n.serializationDuration.count,max:n.serializationDuration.max,sum:n.serializationDuration.sum},size:{compressed:n.bytesCount,raw:n.rawSize}}}function Qt(e){const t=(0,B.Y9)();return{addRecord:n=>{const o=e.findView();t.send("record",n,o.id)}}}function qt(e,t,n,o,s,r,i){const a=[],u=h=>{e.notify(14,{error:h}),(0,U.A2)("Error reported to customer",{"error.message":h.message})},c=i||(0,me.sA)([t.sessionReplayEndpointBuilder],u,$);let l,d;if((0,B.d0)())({addRecord:l}=Qt(o)),d=T.l;else{const h=Yt(e,t,n,o,c,s);l=h.addRecord,d=h.addStats,a.push(h.stop);const v=Kt(r,c.observable);a.push(v.stop)}const{stop:p}=Ut({emitRecord:l,emitStats:d,configuration:t,lifeCycle:e,viewHistory:o});return a.push(p),{stop:()=>{a.forEach(h=>h())}}}}}]);
